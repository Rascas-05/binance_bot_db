8 - Rebuild klines app - Creating our first Django model - Python Trading Bot Full Tutorial (Python, Django, Binance) - Thomas DB - Sep 11 2022
https://www.youtube.com/watch?v=amyVv_WEi5w
# Create another app called "klines"
---Terminal---
python manage.py startapp klines
PS C:\Users\bfvdi\Documents\AppDevelopment\VSCODE\Projects\Django\Thomas-DB\binance_bot_db> 
 *  History restored 

PS C:\Users\bfvdi\Documents\AppDevelopment\VSCODE\Projects\Django\Thomas-DB\binance_bot_db> 
----------------
# Note new folder "klines" and sub folders have been created.
# In klines\models.py we are going to define the "kline" class to create the table and column fields to store kline data retrieved from Binance.
----klines\models.py----
from django.db import models

class Klines(models.Model):
    code = models.CharField(max_length=8, default="BTCUSDT")
    open_time = models.DateTimeField()
    close_time = models.DateTimeField()
    open = models.DecimalField(decimal_places=8, max_digits=24)
    high = models.DecimalField(decimal_places=8, max_digits=24)
    low = models.DecimalField(decimal_places=8, max_digits=24)
    close = models.DecimalField(decimal_places=8, max_digits=24)
    volume = models.IntegerField()
    quote_volume = models.IntegerField()
    number_trades = models.IntegerField()
    taker_buy_base_volume = models.IntegerField()
    taker_buy_quote_volume = models.IntegerField()
----
---settings.py---
Add klines to 'INSTALLED_APPS'
# Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'klines',
]
-----Terminal----
PS C:\Users\bfvdi\Documents\AppDevelopment\VSCODE\Projects\Django\Thomas-DB\binance_bot_db> 
 *  History restored 

Migrations for 'klines':
  klines\migrations\0001_initial.py
    + Create model Klines
PS C:\Users\bfvdi\Documents\AppDevelopment\VSCODE\Projects\Django\Thomas-DB\binance_bot_db> 
----klines\migrations\0001_initial.py----
# Generated by Django 5.1.3 on 2024-11-25 09:51

from django.db import migrations, models
---Terminal---
PS C:\Users\bfvdi\Documents\AppDevelopment\VSCODE\Projects\Django\Thomas-DB\binance_bot_db> python manage.py makemigrations 
Migrations for 'klines':
  klines\migrations\0001_initial.py
    + Create model Klines
PS C:\Users\bfvdi\Documents\AppDevelopment\VSCODE\Projects\Django\Thomas-DB\binance_bot_db> python manage.py migrate       
Operations to perform:
  Apply all migrations: admin, auth, contenttypes, klines, sessions
Running migrations:
  Applying klines.0001_initial... OK
PS C:\Users\bfvdi\Documents\AppDevelopment\VSCODE\Projects\Django\Thomas-DB\binance_bot_db> 
--------
Success - Table klines_klines created with all the required columns as defined in klines\models.py
--------



class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Klines',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(default='BTCUSDT', max_length=8)),
                ('open_time', models.DateTimeField()),
                ('close_time', models.DateTimeField()),
                ('open', models.DecimalField(decimal_places=8, max_digits=24)),
                ('high', models.DecimalField(decimal_places=8, max_digits=24)),
                ('low', models.DecimalField(decimal_places=8, max_digits=24)),
                ('close', models.DecimalField(decimal_places=8, max_digits=24)),
                ('volume', models.IntegerField()),
                ('quote_volume', models.IntegerField()),
                ('number_trades', models.IntegerField()),
                ('taker_buy_base_volume', models.IntegerField()),
                ('taker_buy_quote_volume', models.IntegerField()),
            ],
        ),
    ]
-----Terminal----
ps> python manage.py migrate
PS C:\Users\bfvdi\Documents\AppDevelopment\VSCODE\Projects\Django\Thomas-DB\binance_bot_db> python manage.py migrate
Operations to perform:
  Apply all migrations: admin, auth, contenttypes, klines, sessions
Running migrations:
  No migrations to apply.
PS C:\Users\bfvdi\Documents\AppDevelopment\VSCODE\Projects\Django\Thomas-DB\binance_bot_db> 
That hasn't worked.
This time delete db.sqlite
=============================
removed "klines" from app table in settings.py
Klines folder deleted
db.sqlite deleted
=============================
reopen VSCode
Run test_bot.py ->
---Terminal---
jango\Thomas-DB\binance_bot_db> & c:/Users/bfvdi/Documents/AppDevelopment/VSCODE/Projects/Django/Thomas-DB/binance_bot_db/.venv/Scripts/python.exe c:/Users/bfvdi/Documents/AppDevelopment/VSCODE/Projects/Django/Thomas-DB/binance_bot_db/test_bot.py
End Date = 2025-2-20
End Date Type = <class 'str'>
2025-02-20 00:00:00
Type date2 = <class 'datetime.datetime'>
 Today is 2024-11-25 21:11:40.939021    
Date1 type = <class 'datetime.datetime'>
Date2 type = <class 'datetime.datetime'>
Your API key expires in 86 days
Loading data from log.json file
Reading data from data.json file
API Created date: "2024-11-22" #Date format: yyyy, mm, dd
API Key Expiry date: "2025-2-20" #Date format: yyyy, mm, dd
Testnet .env = True
Using Binance Testnet
API Key White Listed? False
{'open_time': '2024-11-25 10:11:00', 'open': '98643.00000000', 'high': '98643.01000000', 'low': '98609.00000000', 'close': '98621.20000000', 'volume': '17.95573000', 'close_time': '2024-11-25 10:11:59', 'quote_asset_volume': '1770716.97192130', 'number_of_trades': 1583, 'taker_buy_base_asset_volume': '14.70462000', 'taker_buy_quote_asset_volume': '1450040.49115010'}
PS C:\Users\bfvdi\Documents\AppDevelopment\VSCODE\Projects\Django\Thomas-DB\binance_bot_db>
--------------------
Run Django Server
PS python manage.py runserver
---Terminal---
PS C:\Users\bfvdi\Documents\AppDevelopment\VSCODE\Projects\Django\Thomas-DB\binance_bot_db> python manage.py runserver
Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).

You have 18 unapplied migration(s). Your project may not work properly until you apply the migrations for app(s): admin, auth, contenttypes, sessions.Run 'python manage.py migrate' to apply them.
November 25, 2024 - 21:16:05
Django version 5.1.3, using settings 'trading_bot.settings'
Starting development server at http://127.0.0.1:8000/
Quit the server with CTRL-BREAK.

PS C:\Users\bfvdi\Documents\AppDevelopment\VSCODE\Projects\Django\Thomas-DB\binance_bot_db> 
PS C:\Users\bfvdi\Documents\AppDevelopment\VSCODE\Projects\Django\Thomas-DB\binance_bot_db> python manage.py migrate
Operations to perform:
  Apply all migrations: admin, auth, contenttypes, sessions
Running migrations:
  Applying contenttypes.0001_initial... OK
  Applying auth.0001_initial... OK
  Applying admin.0001_initial... OK
  Applying admin.0002_logentry_remove_auto_add... OK
  Applying admin.0003_logentry_add_action_flag_choices... OK
  Applying contenttypes.0002_remove_content_type_name... OK
  Applying auth.0002_alter_permission_name_max_length... OK
  Applying auth.0003_alter_user_email_max_length... OK
  Applying auth.0004_alter_user_username_opts... OK
  Applying auth.0005_alter_user_last_login_null... OK
  Applying auth.0006_require_contenttypes_0002... OK
  Applying auth.0007_alter_validators_add_error_messages... OK
  Applying auth.0008_alter_user_username_max_length... OK
  Applying auth.0009_alter_user_last_name_max_length... OK
  Applying auth.0010_alter_group_name_max_length... OK
  Applying auth.0011_update_proxy_permissions... OK
  Applying auth.0012_alter_user_first_name_max_length... OK
  Applying sessions.0001_initial... OK
PS C:\Users\bfvdi\Documents\AppDevelopment\VSCODE\Projects\Django\Thomas-DB\binance_bot_db> 
---------------
Unable to login as Admin
Recreate superuser.
Create Django Super User/Admin
----Terminal----
PS python manage.py createsuperuser 
username=
email=
pasword=

ps> python manage.py runserver
----Web Browser---
http://127.0.0.1:8000/admin
Login with Admin credentials (username & password)
Login successful.
-----------------
# Create app called "klines"
---Terminal---
python manage.py startapp klines
PS C:\Users\bfvdi\Documents\AppDevelopment\VSCODE\Projects\Django\Thomas-DB\binance_bot_db> python manage.py startapp klines
PS C:\Users\bfvdi\Documents\AppDevelopment\VSCODE\Projects\Django\Thomas-DB\binance_bot_db> 
----klines\models.py----
from django.db import models

class Klines(models.Model):
    code = models.CharField(max_length=8, default="BTCUSDT")
    open_time = models.DateTimeField()
    close_time = models.DateTimeField()
    open = models.DecimalField(decimal_places=8, max_digits=24)
    high = models.DecimalField(decimal_places=8, max_digits=24)
    low = models.DecimalField(decimal_places=8, max_digits=24)
    close = models.DecimalField(decimal_places=8, max_digits=24)
    volume = models.IntegerField()
    quote_volume = models.IntegerField()
    number_trades = models.IntegerField()
    taker_buy_base_volume = models.IntegerField()
    taker_buy_quote_volume = models.IntegerField()
----Settings.py---
Add klines app
# Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'klines',
]
---Terminal---
